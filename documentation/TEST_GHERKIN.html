<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>TEST_GHERKIN</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        background-color: #2a211c;
        color: #bdae9d;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #bdae9d;  padding-left: 4px; }
    div.sourceCode
      { color: #bdae9d; background-color: #2a211c; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ffff00; } /* Alert */
    code span.an { color: #0066ff; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { } /* Attribute */
    code span.bn { color: #44aa43; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #43a8ed; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #049b0a; } /* Char */
    code span.cn { } /* Constant */
    code span.co { color: #0066ff; font-weight: bold; font-style: italic; } /* Comment */
    code span.do { color: #0066ff; font-style: italic; } /* Documentation */
    code span.dt { text-decoration: underline; } /* DataType */
    code span.dv { color: #44aa43; } /* DecVal */
    code span.er { color: #ffff00; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #44aa43; } /* Float */
    code span.fu { color: #ff9358; font-weight: bold; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #0066ff; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #43a8ed; font-weight: bold; } /* Keyword */
    code span.op { } /* Operator */
    code span.pp { font-weight: bold; } /* Preprocessor */
    code span.sc { color: #049b0a; } /* SpecialChar */
    code span.ss { color: #049b0a; } /* SpecialString */
    code span.st { color: #049b0a; } /* String */
    code span.va { } /* Variable */
    code span.vs { color: #049b0a; } /* VerbatimString */
    code span.wa { color: #ffff00; font-weight: bold; } /* Warning */
  </style>
</head>
<body>
<h1 id="test-gherkincucumber-sous-codeceptjs">Test gherkin/cucumber sous
CodeCeptJS</h1>
<p>Le prefixe <code>gherkin</code> des commandes shell, peut être
remplacé par <code>bdd</code> pour une saisie plus rapide</p>
<h2 id="activer-le-gherkin-bdd">Activer le Gherkin / BDD</h2>
<p>Pour initialiser la partie BDD (Behavior Driven Development), il
suffit de lancer :</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npx</span> codeceptjs gherkin:init</span></code></pre></div>
<p>Cela va adapter du projet pour ajouter - un dossier “features” qui
contiendra les critères d’acceptation au format gherkin - un dossier
“step_definitiions” qui contiendra le code permettant de lier les
critères d’acception a la manipulation de l’application - l’activation
de gherkin dans la codecept.conf.js :</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>gherkin<span class="op">:</span> {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">features</span><span class="op">:</span> <span class="st">&#39;./features/*.feature&#39;</span><span class="op">,</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">steps</span><span class="op">:</span> [<span class="st">&#39;./step_definitions/steps.js&#39;</span>]</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Exemple de feature :</p>
<pre class="gherkin"><code>@gherkin @accueil
Feature: Page d&#39;accueil
  En tant que candidat non authentifié
  Je souhaite pouvoir rechercher une offre d&#39;emploi

  @recherche @code_postal
  Scenario: Recerche par code postal
    Given je suis suis sur la page d&#39;accueil
    When je saisi le code postal 33850 et selectionne l&#39;id commune 33238
    And je lances une rechercher
    Then je vois les offres pour la commune de &quot;Léognan&quot;</code></pre>
<h2 id="générer-les-steps-définitions">Générer les steps
définitions</h2>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npx</span> codeceptjs gherkin:snippets</span></code></pre></div>
<p>Cette commande va générer dans step_defintions/steps.js l’intégralité
des actions des fichiers feature qui n’existe pas déjà.</p>
<p>La création des steps définition utilise par défaut toutes les
fichiers feature présent dans les dossiers de la configuration de
codecept et positionne les définitions dans le premier fichier de steps
de la configuration.<br />
Il est possible de préciser <code>--path=</code> pour donner le fichier
de steps de destination et/ou <code>--feature=</code> pour cibler un
fichier gherkin spécifique.</p>
<h2 id="limplémentation">L’implémentation</h2>
<p>Exemple d’implémentation :</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">When</span>(<span class="st">&quot;je lances une rechercher&quot;</span><span class="op">,</span> () <span class="kw">=&gt;</span>{ </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  Je<span class="op">.</span><span class="fu">cliqueSur</span>(accueilPage<span class="op">.</span><span class="at">boutons</span><span class="op">.</span><span class="at">recherche</span>)<span class="op">;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>Il est possible de passer des paramètre depuis les fichiers feature,
pas de besoin d’expression régulière, l’utilisation d’accolades et du
type de données:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">When</span>(<span class="st">&quot;je saisi le code postal {int} et sélectionne la commune {string}&quot;</span><span class="op">,</span> (codePostal<span class="op">,</span> commune) <span class="kw">=&gt;</span>{ </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  Je<span class="op">.</span><span class="fu">remplisLeChamp</span>(accueilPage<span class="op">.</span><span class="at">champs</span><span class="op">.</span><span class="at">lieu</span><span class="op">,</span> codePostal)<span class="op">;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  Je<span class="op">.</span><span class="fu">cliqueSur</span>(accueilPage<span class="op">.</span><span class="at">listes</span><span class="op">.</span><span class="fu">communes</span>(commune))<span class="op">;</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>Les différents types :</p>
<table>
<colgroup>
<col style="width: 57%" />
<col style="width: 42%" />
</colgroup>
<thead>
<tr class="header">
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>{int}</code></td>
<td>les entiers tel que <code>71</code> ou <code>-19</code></td>
</tr>
<tr class="even">
<td><code>{float}</code></td>
<td>les chiffres décimaux <code>3.6</code>, <code>.8</code> ou
<code>-9.2</code></td>
</tr>
<tr class="odd">
<td><code>{word}</code></td>
<td>correspond à un seul mot sans espace <code>banana</code> (mais pas
<code>banana split</code>)</td>
</tr>
<tr class="even">
<td><code>{string}</code></td>
<td>une chaine de caractere entre simple ou double quotes
<code>"banana split"</code> ou <code>'banana split'</code> (mais pas
<code>banana split</code>). les quotes qui encadrent la chaine ne seront
pas passées à la variable</td>
</tr>
<tr class="odd">
<td><code>{}</code> anonymous</td>
<td>correspond à tout (<code>/.*/</code>).</td>
</tr>
</tbody>
</table>
<p>Il est possible de n’executer qu’une partie des features (ou des
scénarios):</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npx</span> codeceptjs run <span class="at">--steps</span> <span class="at">--grep</span> <span class="st">&quot;@code_postal&quot;</span></span></code></pre></div>
<h2 id="retour-accueil"><a href="README.html">Retour Accueil</a></h2>
</body>
</html>
